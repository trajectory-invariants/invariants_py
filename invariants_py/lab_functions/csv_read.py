#!/usr/bin/env python2
# -*- coding: utf-8 -*-
"""
Created on Thu Aug 19 15:39:01 2021

@author: Cristian (slightly modified by Ali)

goal:
    Read a csv file (typically generated by an Orocos reporter) and stores its
    contents in a numpy array. For demonstrations, the first column (in the
    file and in the matrix) corresponds to time, the other columns to the
    different degrees of freedom.
    NOTE skipheader corresponds to the number of rows that belong to the header

input:
    path: path of the .dat file
    skipheader: number of rows that belong to the header
    
output:
    data: loaded data
    header: name of headers
"""

# import
import numpy as np
import csv

# function
def csv_read(path, skipheader):
    '''
    
    '''
    data = []
    header = []
    i = 0
    with open(path,'rb') as csvfile:
        freader = csv.reader(csvfile,delimiter=' ',skipinitialspace=True)
        for row in freader:
            i = i+1
            if i > skipheader:
                #print '=>',', '.join(row)
                if len(row) > 1:
		    if row[-1] == '':
		      data.append( [float(e) for e in row[:-1] ])
		    else:
		      data.append( [float(e) for e in row])
	    else:
	      header.append(row)
    return np.array( data ), header